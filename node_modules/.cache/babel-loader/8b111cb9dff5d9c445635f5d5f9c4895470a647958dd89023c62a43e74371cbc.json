{"ast":null,"code":"import * as e from \"react\";\nimport { ARROW_UP as t, ARROW_DOWN as n, ENTER_KEY as o, ESCAPE_KEY as l } from \"../shared/constants.js\";\nimport { isFunction as s } from \"../shared/utils.js\";\nimport { useStableId as i } from \"../utils/useStableId.js\";\nconst c = new Set([n, t, o, l]),\n  u = _ref => {\n    let {\n      defaultValue: u = \"\",\n      value: a,\n      options: d,\n      optionFilter: r,\n      onBlur: m,\n      onChange: f,\n      onClear: h,\n      onClick: p,\n      onFocus: g,\n      onSelect: b,\n      onSubmit: C\n    } = _ref;\n    const I = void 0 !== a,\n      [k, v] = e.useState(u),\n      O = I ? a : k,\n      [B, E] = e.useState(!1),\n      [w, y] = e.useState(null),\n      S = s(r),\n      T = e.useMemo(() => {\n        const e = S ? e => r(e, O) : e => {\n          const {\n            label: t\n          } = e;\n          return null == t ? void 0 : t.includes(O);\n        };\n        return (null == d ? void 0 : d.filter(e)) || [];\n      }, [O, r, S, d]),\n      H = i(),\n      F = i(),\n      M = i(),\n      V = i(),\n      j = T.findIndex(e => e === w),\n      x = (null == w ? void 0 : w.id) || (-1 !== j ? `${V}-option-${j}` : void 0),\n      D = e.useCallback(e => {\n        E(!1), y(null), s(m) && m(e);\n      }, [m]),\n      R = e.useCallback(e => {\n        y(null), E(!0), I || v(e.target.value), s(f) && f(e);\n      }, [I, f]),\n      $ = e.useCallback(() => {\n        I || v(\"\"), s(h) && h();\n      }, [I, h]),\n      A = e.useCallback(e => {\n        E(!0), s(p) && p(e);\n      }, [p]),\n      K = e.useCallback(e => {\n        E(!0), s(g) && g(e);\n      }, [g]);\n    return e.useEffect(() => {\n      const e = document.getElementById(H),\n        t = document.getElementById(M);\n      if (t && B) {\n        const {\n            bottom: n\n          } = t.getBoundingClientRect(),\n          {\n            offsetParent: o,\n            offsetTop: l\n          } = e;\n        o === document.body && n > document.documentElement.clientHeight && window.scrollTo({\n          top: Math.min(n - document.documentElement.clientHeight + window.scrollY + 20, l),\n          behavior: \"smooth\"\n        });\n      }\n    }, [H, B, M]), e.useEffect(() => {\n      const e = document.getElementById(F),\n        t = document.getElementById(x);\n      if (t && e) {\n        const {\n            scrollTop: n,\n            clientHeight: o\n          } = e,\n          {\n            offsetHeight: l,\n            offsetTop: s\n          } = t,\n          {\n            top: i,\n            bottom: c\n          } = t.getBoundingClientRect();\n        n > s && (e.scrollTop = s), n + o < s + l && (e.scrollTop = s + l - o), (i < 0 || c > document.documentElement.clientHeight) && t.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"nearest\"\n        });\n      }\n    }, [x, F]), {\n      activeOptionId: x,\n      autocompleteId: H,\n      composedValue: O,\n      filteredOptions: T,\n      handleOnBlur: D,\n      handleOnClear: $,\n      handleOnClick: A,\n      handleOnFocus: K,\n      handleOnChange: R,\n      handleOnKeyDown: e => {\n        const {\n          key: i\n        } = e;\n        if (c.has(i)) switch (e.preventDefault(), i) {\n          case l:\n            B ? (E(!1), y(null)) : $();\n            break;\n          case o:\n            if (w) {\n              const {\n                label: e\n              } = w;\n              I || v(e), s(b) && b(w);\n            } else s(C) && C(O);\n            E(!1), y(null);\n            break;\n          case n:\n            {\n              if (T.length <= 0) return;\n              E(!0);\n              const e = j >= T.length - 1 ? 0 : j + 1;\n              y(T[e]);\n              break;\n            }\n          case t:\n            {\n              if (T.length <= 0) return;\n              E(!0);\n              const e = j <= 0 ? T.length - 1 : j - 1;\n              y(T[e]);\n            }\n        }\n      },\n      isControlled: I,\n      isCustomFiltering: S,\n      isMenuOpen: B,\n      listboxId: F,\n      menuId: M,\n      optionBaseId: V,\n      setActiveOption: y,\n      setIsMenuOpen: E,\n      setInternalValue: v\n    };\n  };\nexport { u as useAutocomplete };","map":{"version":3,"names":["e","ARROW_UP","t","ARROW_DOWN","n","ENTER_KEY","o","ESCAPE_KEY","l","isFunction","s","useStableId","i","c","Set","u","defaultValue","value","a","options","d","optionFilter","r","onBlur","m","onChange","f","onClear","h","onClick","p","onFocus","g","onSelect","b","onSubmit","C","I","k","v","useState","O","B","E","w","y","S","T","useMemo","label","includes","filter","H","F","M","V","j","findIndex","x","id","D","useCallback","R","target","$","A","K","useEffect","document","getElementById","bottom","getBoundingClientRect","offsetParent","offsetTop","body","documentElement","clientHeight","window","scrollTo","top","Math","min","scrollY","behavior","scrollTop","offsetHeight","scrollIntoView","block","activeOptionId","autocompleteId","composedValue","filteredOptions","handleOnBlur","handleOnClear","handleOnClick","handleOnFocus","handleOnChange","handleOnKeyDown","key","has","preventDefault","length","isControlled","isCustomFiltering","isMenuOpen","listboxId","menuId","optionBaseId","setActiveOption","setIsMenuOpen","setInternalValue","useAutocomplete"],"sources":["C:/Users/weida/Desktop/playground_CC/node_modules/@aws-amplify/ui-react/dist/esm/primitives/Autocomplete/useAutocomplete.js"],"sourcesContent":["import*as e from\"react\";import{ARROW_UP as t,ARROW_DOWN as n,ENTER_KEY as o,ESCAPE_KEY as l}from\"../shared/constants.js\";import{isFunction as s}from\"../shared/utils.js\";import{useStableId as i}from\"../utils/useStableId.js\";const c=new Set([n,t,o,l]),u=({defaultValue:u=\"\",value:a,options:d,optionFilter:r,onBlur:m,onChange:f,onClear:h,onClick:p,onFocus:g,onSelect:b,onSubmit:C})=>{const I=void 0!==a,[k,v]=e.useState(u),O=I?a:k,[B,E]=e.useState(!1),[w,y]=e.useState(null),S=s(r),T=e.useMemo((()=>{const e=S?e=>r(e,O):e=>{const{label:t}=e;return null==t?void 0:t.includes(O)};return(null==d?void 0:d.filter(e))||[]}),[O,r,S,d]),H=i(),F=i(),M=i(),V=i(),j=T.findIndex((e=>e===w)),x=(null==w?void 0:w.id)||(-1!==j?`${V}-option-${j}`:void 0),D=e.useCallback((e=>{E(!1),y(null),s(m)&&m(e)}),[m]),R=e.useCallback((e=>{y(null),E(!0),I||v(e.target.value),s(f)&&f(e)}),[I,f]),$=e.useCallback((()=>{I||v(\"\"),s(h)&&h()}),[I,h]),A=e.useCallback((e=>{E(!0),s(p)&&p(e)}),[p]),K=e.useCallback((e=>{E(!0),s(g)&&g(e)}),[g]);return e.useEffect((()=>{const e=document.getElementById(H),t=document.getElementById(M);if(t&&B){const{bottom:n}=t.getBoundingClientRect(),{offsetParent:o,offsetTop:l}=e;o===document.body&&n>document.documentElement.clientHeight&&window.scrollTo({top:Math.min(n-document.documentElement.clientHeight+window.scrollY+20,l),behavior:\"smooth\"})}}),[H,B,M]),e.useEffect((()=>{const e=document.getElementById(F),t=document.getElementById(x);if(t&&e){const{scrollTop:n,clientHeight:o}=e,{offsetHeight:l,offsetTop:s}=t,{top:i,bottom:c}=t.getBoundingClientRect();n>s&&(e.scrollTop=s),n+o<s+l&&(e.scrollTop=s+l-o),(i<0||c>document.documentElement.clientHeight)&&t.scrollIntoView({behavior:\"smooth\",block:\"nearest\"})}}),[x,F]),{activeOptionId:x,autocompleteId:H,composedValue:O,filteredOptions:T,handleOnBlur:D,handleOnClear:$,handleOnClick:A,handleOnFocus:K,handleOnChange:R,handleOnKeyDown:e=>{const{key:i}=e;if(c.has(i))switch(e.preventDefault(),i){case l:B?(E(!1),y(null)):$();break;case o:if(w){const{label:e}=w;I||v(e),s(b)&&b(w)}else s(C)&&C(O);E(!1),y(null);break;case n:{if(T.length<=0)return;E(!0);const e=j>=T.length-1?0:j+1;y(T[e]);break}case t:{if(T.length<=0)return;E(!0);const e=j<=0?T.length-1:j-1;y(T[e])}}},isControlled:I,isCustomFiltering:S,isMenuOpen:B,listboxId:F,menuId:M,optionBaseId:V,setActiveOption:y,setIsMenuOpen:E,setInternalValue:v}};export{u as useAutocomplete};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}