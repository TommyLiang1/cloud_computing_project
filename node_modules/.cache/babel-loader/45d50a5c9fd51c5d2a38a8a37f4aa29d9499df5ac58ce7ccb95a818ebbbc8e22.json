{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r } from \"aws-amplify\";\nimport { translate as a, getTotpCodeURL as i } from \"@aws-amplify/ui\";\nimport { Flex as n } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as l } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as m } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as s } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as c } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as d } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as p } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as u } from \"../shared/FormFields.js\";\nimport { RouteContainer as f } from \"../RouteContainer/RouteContainer.js\";\nconst g = new r(\"SetupTOTP-logger\"),\n  E = _ref => {\n    let {\n      className: r,\n      variation: l\n    } = _ref;\n    var h;\n    const {\n        fields: v,\n        getTotpSecretCode: C,\n        isPending: y,\n        user: H\n      } = m(e => [e.isPending]),\n      {\n        handleChange: w,\n        handleSubmit: S\n      } = c(),\n      {\n        components: {\n          SetupTOTP: {\n            Header: F = E.Header,\n            Footer: j = E.Footer\n          }\n        }\n      } = s(),\n      [T, x] = o.useState(!0),\n      [P, V] = o.useState(),\n      [b, O] = o.useState(\"COPY\"),\n      [R, k] = o.useState(\"\"),\n      {\n        totpIssuer: L = \"AWSCognito\",\n        totpUsername: M = null == H ? void 0 : H.username\n      } = null !== (h = null == v ? void 0 : v.QR) && void 0 !== h ? h : {},\n      q = o.useCallback(() => e(void 0, void 0, void 0, function* () {\n        try {\n          const e = yield C();\n          k(e);\n          const o = i(L, M, e),\n            r = yield t.toDataURL(o);\n          V(r);\n        } catch (e) {\n          g.error(e);\n        } finally {\n          x(!1);\n        }\n      }), [C, L, M]);\n    o.useEffect(() => {\n      P || q();\n    }, [q, P]);\n    return o.createElement(f, {\n      className: r,\n      variation: l\n    }, o.createElement(\"form\", {\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: w,\n      onSubmit: S\n    }, o.createElement(n, {\n      as: \"fieldset\",\n      direction: \"column\",\n      isDisabled: y\n    }, o.createElement(F, null), o.createElement(n, {\n      direction: \"column\"\n    }, T ? o.createElement(\"p\", null, a(\"Loading\"), \"…\") : o.createElement(\"img\", {\n      \"data-amplify-qrcode\": !0,\n      src: P,\n      alt: \"qr code\",\n      width: \"228\",\n      height: \"228\"\n    }), o.createElement(n, {\n      \"data-amplify-copy\": !0\n    }, o.createElement(\"div\", null, R), o.createElement(n, {\n      \"data-amplify-copy-svg\": !0,\n      onClick: () => {\n        navigator.clipboard.writeText(R), O(a(\"COPIED\"));\n      }\n    }, o.createElement(\"div\", {\n      \"data-amplify-copy-tooltip\": !0\n    }, b), o.createElement(\"svg\", {\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, o.createElement(\"path\", {\n      d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n    })))), o.createElement(u, null), o.createElement(p, null)), o.createElement(d, null), o.createElement(j, null))));\n  };\nE.Header = function () {\n  return o.createElement(l, {\n    level: 3\n  }, a(\"Setup TOTP\"));\n}, E.Footer = function () {\n  return null;\n};\nexport { E as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","translate","a","getTotpCodeURL","i","Flex","n","Heading","l","useAuthenticator","m","useCustomComponents","s","useFormHandlers","c","ConfirmSignInFooter","d","RemoteErrorMessage","p","FormFields","u","RouteContainer","f","g","E","className","variation","h","fields","v","getTotpSecretCode","C","isPending","y","user","H","handleChange","w","handleSubmit","S","components","SetupTOTP","Header","F","Footer","j","T","x","useState","P","V","b","O","R","k","totpIssuer","L","totpUsername","M","username","QR","q","useCallback","toDataURL","error","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["C:/Users/weida/Desktop/playground_CC/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.js"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r}from\"aws-amplify\";import{translate as a,getTotpCodeURL as i}from\"@aws-amplify/ui\";import{Flex as n}from\"../../../primitives/Flex/Flex.js\";import{Heading as l}from\"../../../primitives/Heading/Heading.js\";import{useAuthenticator as m}from\"@aws-amplify/ui-react-core\";import{useCustomComponents as s}from\"../hooks/useCustomComponents/index.js\";import{useFormHandlers as c}from\"../hooks/useFormHandlers/useFormHandlers.js\";import{ConfirmSignInFooter as d}from\"../shared/ConfirmSignInFooter.js\";import{RemoteErrorMessage as p}from\"../shared/RemoteErrorMessage.js\";import{FormFields as u}from\"../shared/FormFields.js\";import{RouteContainer as f}from\"../RouteContainer/RouteContainer.js\";const g=new r(\"SetupTOTP-logger\"),E=({className:r,variation:l})=>{var h;const{fields:v,getTotpSecretCode:C,isPending:y,user:H}=m((e=>[e.isPending])),{handleChange:w,handleSubmit:S}=c(),{components:{SetupTOTP:{Header:F=E.Header,Footer:j=E.Footer}}}=s(),[T,x]=o.useState(!0),[P,V]=o.useState(),[b,O]=o.useState(\"COPY\"),[R,k]=o.useState(\"\"),{totpIssuer:L=\"AWSCognito\",totpUsername:M=(null==H?void 0:H.username)}=null!==(h=null==v?void 0:v.QR)&&void 0!==h?h:{},q=o.useCallback((()=>e(void 0,void 0,void 0,(function*(){try{const e=yield C();k(e);const o=i(L,M,e),r=yield t.toDataURL(o);V(r)}catch(e){g.error(e)}finally{x(!1)}}))),[C,L,M]);o.useEffect((()=>{P||q()}),[q,P]);return o.createElement(f,{className:r,variation:l},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:w,onSubmit:S},o.createElement(n,{as:\"fieldset\",direction:\"column\",isDisabled:y},o.createElement(F,null),o.createElement(n,{direction:\"column\"},T?o.createElement(\"p\",null,a(\"Loading\"),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:P,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(n,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,R),o.createElement(n,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(R),O(a(\"COPIED\"))}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},b),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(u,null),o.createElement(p,null)),o.createElement(d,null),o.createElement(j,null))))};E.Header=function(){return o.createElement(l,{level:3},a(\"Setup TOTP\"))},E.Footer=function(){return null};export{E as SetupTOTP};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}